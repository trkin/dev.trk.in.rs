<?xml version="1.0" encoding="UTF-8"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>TRK RAILS</title>
    <description>TRK IN NOVI SAD
</description>
    <link>https://dev.trk.in.rs/</link>
    <atom:link href="https://dev.trk.in.rs/feed.xml" rel="self" type="application/rss+xml"/>
    <pubDate>Fri, 21 Apr 2023 16:14:28 +0000</pubDate>
    <lastBuildDate>Fri, 21 Apr 2023 16:14:28 +0000</lastBuildDate>
    <generator>Jekyll v4.3.2</generator>
    
      <item>
        <title>Docker Tips</title>
        <description>&lt;h2 id=&quot;install-on-ubuntu&quot;&gt;Install on ubuntu&lt;/h2&gt;

&lt;p&gt;Follow instructions on &lt;a href=&quot;https://docs.docker.com/engine/install/ubuntu/&quot;&gt;https://docs.docker.com/engine/install/ubuntu/&lt;/a&gt;
After adding GPG key and repo you can run&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get install docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
sudo docker run hello-world
Hello from Docker!
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;or you can use convenience script&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh ./get-docker.sh --dry-run
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Uninstall with&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo apt-get purge docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin docker-ce-rootless-extras
sudo rm -rf /var/lib/docker
sudo rm -rf /var/lib/containerd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;To enable users to run use docker engine without sudo
https://docs.docker.com/engine/install/linux-postinstall/&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo usermod -aG docker $USER
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;ul&gt;
  &lt;li&gt;run ubuntu shell
    &lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;docker run -it ubuntu /bin/bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;    &lt;/div&gt;
  &lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;https://docs.docker.com/engine/install/linux-postinstall/&lt;/p&gt;
</description>
        <pubDate>Thu, 30 Mar 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/03/30/docker-tips/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/03/30/docker-tips/</guid>
        
        
      </item>
    
      <item>
        <title>Aws Cli</title>
        <description>&lt;h1 id=&quot;install-and-configure-aws-cli&quot;&gt;Install and configure AWS cli&lt;/h1&gt;

&lt;p&gt;Install and enable completion&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# Ubuntu
sudo apt install awscli

# .bash_profile should source .bashrc
echo complete -C &apos;/usr/local/bin/aws_completer&apos; aws &amp;gt; ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You need keys to connect and configure will store them in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.aws/credentials&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws configure
AWS Access Key ID [None]: 123....4P5Q
AWS Secret Access Key [None]: 123...TCzr
Default region name [None]: us-east-1
Default output format [None]:

cat ~/.aws/credentials
[default]
aws_access_key_id = 123...4P5Q
aws_secret_access_key = 123...TCzr

cat ~/.aws/config
[default]
region = us-east-1

aws configure
AWS Access Key ID [**************4P5Q]:
AWS Secret Access Key [****************TCzr]:
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can have several profiles in additional to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[default]&lt;/code&gt;.
To add another profile&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws configure --profile duleorlovic
# this will add [profile duleorlovic] to ~/.aws/config
# and [duleorlovic] to ~/.aws/credentials
# you can use in terraform provider &quot;aws&quot; { profile = &quot;duleorlovic&quot; }
aws ec2 describe-vpcs --profile duleorlovic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can check which profile you are using&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# show current profile settings
aws configure list

# list all profile names
aws configure list-profile
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;To change profile in shell you can export&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export AWS_PROFILE=duleorlovic
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Another way to change profile is to use different credentials file&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;AWS_SHARED_CREDENTIALS_FILE=~/.aws/credentials_duleorlovic aws s3 ls s3://my-trk-bucket
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can extract data with query to parse json for example
Find other examples on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;aws ec2 describe-instances help&lt;/code&gt;
TODO: add examples&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[*]&lt;/code&gt; array&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.attribute&lt;/code&gt;
you can have &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--output text&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--output json&lt;/code&gt; or &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;--output table&lt;/code&gt;, or you can
use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;jq&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# list all public instances, using * returns array of arrays
aws ec2 describe-instances --query &quot;Reservations[*].Instances[*].PublicIpAddress&quot; --output=text
# this returns inline results since it is single array
aws ec2 describe-instances --query &quot;Reservations[].Instances[].PublicIpAddress&quot; --output=text
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;You can combine columns, for example to show ARN&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;aws ec2 describe-instances --region us-east-1 | jq -r &apos;.Reservations[] | .OwnerId as $OwnerId | ( .Instances[] | { &quot;ARN&quot;: &quot;arn:aws:ec2:\(.Placement.AvailabilityZone[:-1]):\($OwnerId):instance/\(.InstanceId)&quot;, &quot;AvailabilityZone&quot;: &quot;\(.Placement.AvailabilityZone)&quot;, InstanceId, PublicDnsName, PrivateDnsName, Tags} )&apos; | jq -s .
[
  {
    &quot;ARN&quot;: &quot;arn:aws:ec2:us-east-1:606470370249:instance/i-0b7175eed059b8f41&quot;,
    &quot;AvailabilityZone&quot;: &quot;us-east-1a&quot;,
    &quot;InstanceId&quot;: &quot;i-0b7175eed059b8f41&quot;,
    &quot;PublicDnsName&quot;: &quot;ec2-34-230-46-141.compute-1.amazonaws.com&quot;,
    &quot;PrivateDnsName&quot;: &quot;ip-172-31-90-19.ec2.internal&quot;,
    &quot;Tags&quot;: [
      {
        &quot;Key&quot;: &quot;Name&quot;,
        &quot;Value&quot;: &quot;test&quot;
      }
    ]
  }
]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

</description>
        <pubDate>Sun, 26 Mar 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/03/26/aws-cli/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/03/26/aws-cli/</guid>
        
        
      </item>
    
      <item>
        <title>Git Tips</title>
        <description>&lt;h2 id=&quot;git-style&quot;&gt;Git style&lt;/h2&gt;

&lt;p&gt;For Git we follows this guides&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/thoughtbot/guides/tree/main/git&quot;&gt;https://github.com/thoughtbot/guides/tree/main/git&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When you move large number of files, or run linters, that should be in separate
commit (or even separate pull request) and put the command in commit message&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git mv test/fixtures spec
git commit -am&quot;git mv test/fixtures spec&quot;

# or
standardrb --fix spec
git commit -am&quot;standardrb --fix spec&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;code-review&quot;&gt;Code review&lt;/h2&gt;

&lt;p&gt;For code review&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/thoughtbot/guides/tree/main/code-review&quot;&gt;https://github.com/thoughtbot/guides/tree/main/code-review&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;When working on some task, for example issue 123 than we usually create a branch
that looks like &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i#{issue number}_#{description}&lt;/code&gt; and use commit number at the
end &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;git commit -m&apos;#{some description} ##{issue number}&lt;/code&gt;
For example&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git checkout -b i123_add_test_for_signup
# make changes
git commit -m&apos;Add test for signup #123`
git push -u origin i123_add_test_for_signup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;git-hooks&quot;&gt;Git hooks&lt;/h2&gt;

&lt;p&gt;We use git hook for commit message so the issue number is automatically added to
commit message.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cat &amp;gt; .git/hooks/prepare-commit-msg &amp;lt;&amp;lt; &apos;HERE_DOC&apos;
#!/bin/bash
#
# Source https://dev.trk.in.rs/2023/03/21/git-tips#git-hooks
#
# https://gist.github.com/jimschubert/9073276
# Automatically adds branch name to every commit message.
# Modified from the stackoverflow answer here: http://stackoverflow.com/a/11524807/151445
#

# Get branch name, use sed to strip name and keep only numbers
# i123_my_branch_name -&amp;gt; 123
issueNumber=$(git branch | grep &apos;*&apos; | grep -o &apos;[0-9]*&apos;)
# issueNumber=$(git branch --show-current)

# Get the first line, ex: from ammending or mmm from git commit -am&apos;mmm&apos;
firstLine=$(head -n1 $1)

if ! [[ $firstLine =~ $issueNumber ]] ; then
  # Prepend issueNumber to COMMIT_MSG
  echo &quot;[#$issueNumber]&quot;&apos; &apos;$(cat &quot;$1&quot;| sed &apos;/^#.*/d&apos;) &amp;gt; &quot;$1&quot;
  #
  # Append issueNumber to COMMIT_MSG
  # echo -n &quot;i#$issueNumber&quot; &amp;gt;&amp;gt; &quot;$1&quot; # this will add at the end
  # echo $(cat &quot;$1&quot; | sed &apos;/^#.*/d&apos;)&apos; &apos;&quot;i#$issueNumber&quot; &amp;gt; &quot;$1&quot;

  # Insert issueNumber at the end of the commit message file
  # sed -i &quot;1s@^@\n\n$issueNumber@&quot; $1
fi
HERE_DOC

chmod +x .git/hooks/prepare-commit-msg
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Next time you make a commit on a branch &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i123_add_test_for_signup&lt;/code&gt; than commit
message will include &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[123]&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git commit -am&quot;Add test for signup&quot;
[#123] Add test for signup
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;gitflow&quot;&gt;Gitflow&lt;/h2&gt;

&lt;p&gt;For big projects we follow GitFlow
so all PR are done on &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;develop&lt;/code&gt; branch. Only &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;i123_hotfix_something&lt;/code&gt; branch
start from &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt; and merged back to &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;develop&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;main&lt;/code&gt;.&lt;/p&gt;

&lt;p&gt;Nice tutorial:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow&quot;&gt;https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;github-cli&quot;&gt;Github cli&lt;/h2&gt;

&lt;p&gt;We also use gh cli&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# create PR and put commit messages as comment
gh pr create --fill

# assign reviewers
gh pr edit

# rebase and delete local and remote branch
gh pr merge -r -d
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Tue, 21 Mar 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/03/21/git-tips/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/03/21/git-tips/</guid>
        
        
      </item>
    
      <item>
        <title>Code Style Guides</title>
        <description>&lt;p&gt;For Ruby we are following&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/thoughtbot/guides/tree/main/ruby&quot;&gt;https://github.com/thoughtbot/guides/tree/main/ruby&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/Shopify/ruby-style-guide&quot;&gt;https://github.com/Shopify/ruby-style-guide&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/airbnb/ruby&quot;&gt;https://github.com/airbnb/ruby&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;For automated way of controlling code styles we use
&lt;a href=&quot;https://github.com/testdouble/standard&quot;&gt;Standard&lt;/a&gt; which uses Rubocop underneath
and it is installed with those commands:&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;bundle add standard

cat &amp;gt; .rubocop.yml &amp;lt;&amp;lt;HERE_DOC
require: standard

inherit_gem:
  standard: config/base.yml
HERE_DOC

cat &amp;gt; .standard.yml &amp;lt;&amp;lt;HERE_DOC
ignore:
  - &quot;**/*&quot;:
    # put comma after each line {a:1,}
    - Style/TrailingCommaInHashLiteral
HERE_DOC
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;erb-lint&quot;&gt;Erb lint&lt;/h2&gt;

&lt;p&gt;TODO: https://github.com/Shopify/erb-lint&lt;/p&gt;

&lt;h1 id=&quot;text-syntax-on-buttons-and-messages&quot;&gt;Text syntax on buttons and messages&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;labels on buttons, titles,…  should be upper case with no period: &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;This Job
Is Paused&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;sentences on error messages, flash messages…  should have period at the end:
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;Job has been copied successfully.&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Wed, 15 Mar 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/03/15/code-style-guides/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/03/15/code-style-guides/</guid>
        
        
      </item>
    
      <item>
        <title>Cloudflare Tunnel</title>
        <description>&lt;p&gt;Ngrok is a service which gives you random url whenever you start a new tunnel.
&lt;a href=&quot;https://www.cloudflare.com/products/tunnel/&quot;&gt;Clodflare tunnel&lt;/a&gt; is a free
service that you can use as ngrok alternative.&lt;/p&gt;

&lt;p&gt;Install&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install cloudflared
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can create a temporary tunnel with random url&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;cloudflared tunnel --url http://localhost:3000
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;and it will be available under .trycloudflare.com like
&lt;a href=&quot;https://request-composer-pools-requirements.trycloudflare.com&quot;&gt;https://request-composer-pools-requirements.trycloudflare.com&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;For long living tunnels which uses the same url you should use
&lt;a href=&quot;https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/tunnel-guide/local/&quot;&gt;https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/tunnel-guide/local/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# list all tunnels created previously using cloudflared cli on web
cloudflared tunnel list

# create tunnel and config.json file
cloudflared tunnel create mytunnel
# Tunnel credentials written to /home/dule/.cloudflared/asd....asd.json

# create config file that uses this credentials and tunnel name
cat &amp;gt; ~/.cloudflared/config.yaml &amp;lt;&amp;lt; &apos;HERE_DOC&apos;
url: http://localhost:3000
tunnel: mytunnel
credentials-file: ~/.cloudflared/asd....asd.json
HERE_DOC

# create DNS CNAME record to route to tunnel
cloudflared tunnel route dns mytunnel mytunnel.trk.in.rs

# start the tunnel
cloudflared tunnel run mytunnel

# check tunnel status
cloudflared tunnel info mytunnel
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;If you install as a service than you need to stop that service&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;systemctl status cloudflared
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 23 Feb 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/02/23/cloudflare-tunnel/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/02/23/cloudflare-tunnel/</guid>
        
        
      </item>
    
      <item>
        <title>Build Kindergarten Exchange App</title>
        <description>&lt;p&gt;As a practice task in our &lt;a href=&quot;/2023/01/04/internship/&quot;&gt;first intership&lt;/a&gt;
we are rebuilding a webapp that will help parents organize themselves and find
free places in kindergartens that are closer to them. When there are no
vacancies the only way to move the kids to another kindergarten is to find
someone else who also wants to move. Existing app source is
&lt;a href=&quot;https://github.com/trkin/premesti.se&quot;&gt;https://github.com/trkin/premesti.se&lt;/a&gt; and
we are rebuilding to use latest tools like &lt;a href=&quot;https://turbo.hotwired.dev/&quot;&gt;Turbo&lt;/a&gt;
Source code is on github&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;https://github.com/trkin/kindergarten-exchange&quot;&gt;https://github.com/trkin/kindergarten-exchange&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;Main tools that we will use:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;Ruby on Rails as a server side engine&lt;/li&gt;
  &lt;li&gt;Github projects for organizing tasks&lt;/li&gt;
  &lt;li&gt;Neo4j graph database to find matches in rotations&lt;/li&gt;
  &lt;li&gt;Figma for designs&lt;/li&gt;
  &lt;li&gt;Tailwind for styles&lt;/li&gt;
  &lt;li&gt;Jekyll for blog&lt;/li&gt;
  &lt;li&gt;Turbo and Stimulus for registration and chat&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;All practicioners should choose one area in which to become a master so they can
teach other teammates.&lt;/p&gt;

&lt;p&gt;Main features should be:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;user registration using various ways: phone number, email, social buttons&lt;/li&gt;
  &lt;li&gt;user select &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;move&lt;/code&gt; ie kindergarten in which they are interested in&lt;/li&gt;
  &lt;li&gt;user can share their moves on social networks&lt;/li&gt;
  &lt;li&gt;graph engine that calculates matches for each new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;move&lt;/code&gt;&lt;/li&gt;
  &lt;li&gt;for each match a new &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;chat&lt;/code&gt; is created and notifications are sent&lt;/li&gt;
  &lt;li&gt;admin pages to invite users to register, to send promotional emails and users
can unsubscribe to them&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Advanced features:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;enable payment so moves that includes at least one premium move can chat
immediatelly, and moves that are all free are waiting one week for
notification and chat (send email to buy premium or to wait).
Premium can be obtained by sharing on social networks. Use other features for
premium like: free sms notification&lt;/li&gt;
  &lt;li&gt;create mobile apps for Android and iOS&lt;/li&gt;
  &lt;li&gt;create Viber app for registration&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;App should be using I18n transations and covered with tests.&lt;/p&gt;
</description>
        <pubDate>Tue, 21 Feb 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/02/21/build-kindergarten-exchange-app/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/02/21/build-kindergarten-exchange-app/</guid>
        
        
      </item>
    
      <item>
        <title>Learning Materials For Ruby And Rails</title>
        <description>&lt;h1 id=&quot;ruby&quot;&gt;Ruby&lt;/h1&gt;

&lt;p&gt;To start learning Ruby, you can try with:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.freecodecamp.org/news/learning-ruby-from-zero-to-hero-90ad4eecc82d/&quot;&gt;FreeCodeCamp Learning Ruby: From Zero to Hero&lt;/a&gt; (text)&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/watch?v=wI-hfFW9hfI&quot;&gt;The Nerdy Dev Learn Ruby Programming in 3 hours FULL COURSE&lt;/a&gt; (video)&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;To Install on your machine the best is using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv&lt;/code&gt;.&lt;/p&gt;

&lt;h1 id=&quot;ruby-on-rails&quot;&gt;Ruby on Rails&lt;/h1&gt;

&lt;p&gt;The best way for using some tools is to read it’s documentation. So for RoR you
should start from&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://guides.rubyonrails.org/&quot;&gt;https://guides.rubyonrails.org/&lt;/a&gt; (text)
You can start with &lt;a href=&quot;https://guides.rubyonrails.org/getting_started.html&quot;&gt;Getting started with
Rails&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://www.youtube.com/@Deanin&quot;&gt;https://www.youtube.com/@Deanin&lt;/a&gt; Deanin
youtube channel. You can start with &lt;a href=&quot;https://www.youtube.com/watch?v=TlgSp2XPCY4&amp;amp;list=PL3mtAHT_eRezB9fnoIcKS4vYFjm23vddb&amp;amp;index=1&quot;&gt;Intro to Ruby on Rails 7 Fullstack
Tutorial | Rails for Beginners Part 1&lt;/a&gt;.
Note that some videos can be found in other playlists for example &lt;a href=&quot;https://www.youtube.com/watch?v=4GjXSI6jcLI&amp;amp;list=PL3mtAHT_eRexG8W__yiMgv3tcIdbLlwho&amp;amp;index=50&quot;&gt;The VSCode Rails Extensions
Used In This Series | Intro To Ruby On Rails For Beginners Part 17
&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;h1 id=&quot;javascript&quot;&gt;Javascript&lt;/h1&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://github.com/mbeaudru/modern-js-cheatsheet#template-literals&quot;&gt;https://github.com/mbeaudru/modern-js-cheatsheet#template-literals&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
</description>
        <pubDate>Tue, 24 Jan 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/01/24/learning-materials-for-ruby-and-rails/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/01/24/learning-materials-for-ruby-and-rails/</guid>
        
        
      </item>
    
      <item>
        <title>Install Ruby Using Brew Rbenv</title>
        <description>&lt;h2 id=&quot;first-steps-on-new-ubuntu-machine&quot;&gt;First steps on new Ubuntu machine&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# git is used to code collaboration
sudo apt install -y git curl
# necessary if you want to commit to any project
git config --global user.email &quot;you@example.com&quot;
git config --global user.name &quot;Your Name&quot;
# nice editor
sudo apt install vim
# if you want to change default editor from nano to something else
sudo update-alternatives --config editor
# enable ssh to localhost
sudo apt install openssh-server
# generate ~/ssh/id_rsa and ~/ssh/id_rsa.pub to add to
ssh-keygen

# network tool to find all open ports and ip addresses, eg  nmap -F 192.168.1.-
sudo apt install nmap

# for building ruby
sudo apt install -y build-essential libz-dev
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Install google chrome from &lt;a href=&quot;https://www.google.com/chrome/&quot;&gt;https://www.google.com/chrome/&lt;/a&gt;
Right click on .deb file in Downloads, select Properties and in ‘Open With’ tab select ‘Software Install’ and click ‘Set as default’. Exit and double click on the .deb file to install Chrome.&lt;/p&gt;

&lt;h2 id=&quot;brew&quot;&gt;Brew&lt;/h2&gt;

&lt;p&gt;Use brew instead of manually install packages so all users can use the same libs
&lt;a href=&quot;https://brew.sh/&quot;&gt;https://brew.sh/&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bashrc&lt;/code&gt; and reopen terminal. Typing &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;reset&lt;/code&gt; won’t work&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo &apos;eval &quot;$(/home/linuxbrew/.linuxbrew/bin/brew shellenv)&quot;&apos; &amp;gt;&amp;gt; /home/$USER/.bashrc
cat ~/.bashrc # you should see above line
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Now you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;brew&lt;/code&gt; every time you open terminal&lt;/p&gt;

&lt;p&gt;If you use multiseat than you need to add new group and attach each user to it
https://apple.stackexchange.com/a/45003/449651
Error is&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew update &amp;amp;&amp;amp; brew upgrade ruby-build
Error: /home/linuxbrew/.linuxbrew/Homebrew is not writable. You should change the
ownership and permissions of /home/linuxbrew/.linuxbrew/Homebrew back to your
user account:
  sudo chown -R $(whoami) /home/linuxbrew/.linuxbrew/Homebrew
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Add group&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo groupadd brew
compgen -u # list all users
sudo usermod -aG brew dule
sudo usermod -aG brew mile

sudo chgrp -R brew /home/linuxbrew/.linuxbrew/
sudo chmod -R g+w /home/linuxbrew/.linuxbrew/

# check that group has rw-
ls -la /home/linuxbrew/.linuxbrew/Homebrew/README.md
-rw-rw-r-- 1 dule brew 8495 феб  9 08:40 /home/linuxbrew/.linuxbrew/Homebrew/README.md
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;install-rbenv&quot;&gt;Install rbenv&lt;/h2&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install rbenv ruby-build libyaml openssl@1.1
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Add this to your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/.bashrc&lt;/code&gt; so you can access rbenv commands&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo export PATH=&quot;$HOME/.rbenv/bin:$PATH&quot; &amp;gt;&amp;gt; ~/.bashrc
echo eval &quot;$(rbenv init -)&quot; &amp;gt;&amp;gt; ~/.bashrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;installing-ruby-using-rbenv&quot;&gt;Installing Ruby using rbenv&lt;/h2&gt;

&lt;p&gt;To change ruby version you can use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ruby-version&lt;/code&gt; file in current or any parent
folder. For example you can set default version with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.ruby-version&lt;/code&gt; in your
home folder &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;~/&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;echo 3.2.0 &amp;gt; ~/.ruby-version
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can also change ruby version with this command or env variable&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;rbenv shell 3.2.0

# this is the same as export RBENV_VERSION=3.2.0

# check all installed versions
rbenv versions
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;ruby-320&quot;&gt;Ruby 3.2.0&lt;/h3&gt;

&lt;p&gt;For compiling Ruby 3.2.0 you should use openssl@3
Check &lt;a href=&quot;https://github.com/rbenv/ruby-build/wiki&quot;&gt;rbenv/ruby-build&lt;/a&gt; wiki for
additional info&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install openssl@3

export RUBY_CONFIGURE_OPTS=&quot;--with-openssl-dir=`brew --prefix openssl@3`&quot;

rbenv install 3.2.0
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Export these variables, &lt;strong&gt;don’t&lt;/strong&gt; save them in your &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;.bashrc&lt;/code&gt; it won’t work for
every Ruby version so to be on the safe side just export them every time you
want to install new Ruby version&lt;/p&gt;

&lt;p&gt;When you install gems that need to be compiled locally than you might need to
export PATH, LDFLAGS, CPPFLAGS or PKG_CONFIG_PATH&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export PATH=&quot;/home/linuxbrew/.linuxbrew/opt/openssl@3/bin:$PATH&quot;
export LDFLAGS=&quot;-L`brew --prefix openssl@3`/lib&quot;
export CPPFLAGS=&quot;-I`brew --prefix openssl@3`/include&quot;
export PKG_CONFIG_PATH=&quot;`brew --prefix openssl@3`/lib/pkgconfig&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Note: &lt;strong&gt;Do not restart terminal&lt;/strong&gt; if you are exporting variables, it won’t persist in the next session&lt;/p&gt;

&lt;p&gt;For example Installing Ruby version that uses openssl@1.1&lt;/p&gt;

&lt;p&gt;To install version of ruby that uses openssl@1.1 we need to use RUBY_CONFIGURE_OPTS&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export RUBY_CONFIGURE_OPTS=&quot;--with-openssl-dir=`brew --prefix openssl@1.1`&quot;
ruby install 2.6.7

export LDFLAGS=&quot;-L`brew --prefix openssl@1.1`/lib&quot;
export CPPFLAGS=&quot;-I`brew --prefix openssl@1.1`/include&quot;
export PKG_CONFIG_PATH=&quot;`brew --prefix openssl@1.1`/lib/pkgconfig&quot;

bundle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;For Ruby 3.2.1 on ubuntu you might need to use define readline location&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;export RUBY_CONFIGURE_OPTS=&quot;--with-openssl-dir=`brew --prefix openssl` --with-readline-dir=`brew --prefix readline`&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;On macOS you, ruby 3.2.1 can be installed &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rbenv install 3.2.1&lt;/code&gt; but make sure
you are not using Rosseta (Finder &amp;gt; Menu Go &amp;gt; Utilities &amp;gt; Terminal &amp;gt; right click
Get Info &amp;gt; uncheck Open using Rosetta) so the output is arm&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;uname -m
arm64
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;jekyll&quot;&gt;Jekyll&lt;/h2&gt;

&lt;p&gt;When you install new gems, sometimes you need to rehash to create new shims
&lt;a href=&quot;https://github.com/rbenv/rbenv#rbenv-rehash&quot;&gt;https://github.com/rbenv/rbenv#rbenv-rehash&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem install jekyll
Command &apos;jekyll&apos; not found, but can be installed with:

rbenv rehash
jekyll # now it works
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;rails&quot;&gt;Rails&lt;/h2&gt;

&lt;p&gt;If you notice an error when you are using &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;rails s&lt;/code&gt; command&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;LoadError: libssl.so.1.1: cannot open shared object file: No such file or directory - /home/dule/.rbenv/versions/3.2.0/lib/ruby/gems/3.2.0/gems/puma-5.6.5/lib/puma/puma_http11.so
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;you should remove puma gem and install with correct LD and CPP flags pointing to
openssl 3.&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem uninstall puma

export LDFLAGS=&quot;-L$(brew --prefix openssl@3)/lib&quot;
export CPPFLAGS=&quot;-I$(brew --prefix openssl@3)/include&quot;

bundle

# or you can install specific version using arguments to `gem install`
gem install puma -v 5.6.5 -- --with-cppflags=-I`brew --prefix openssl@3`/include --with-ldflags=-L`brew --prefix openssl@3`/lib
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Alternative solution is to disable SSL when installing puma&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gem uninstall puma
DISABLE_SSL=1 bundle
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;nvm-node-yarn&quot;&gt;NVM node yarn&lt;/h2&gt;

&lt;p&gt;Install nvm &lt;a href=&quot;https://github.com/nvm-sh/nvm&quot;&gt;https://github.com/nvm-sh/nvm&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.3/install.sh | bash
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;than restart shell (ie open new shell) install node&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;nvm install 14
npm install -g yarn
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Old node-sass has some issues with node 16 (it can not find python even python2
is installed)
&lt;a href=&quot;https://stackoverflow.com/questions/67241196/error-no-template-named-remove-cv-t-in-namespace-std-did-you-mean-remove&quot;&gt;stackoverflow&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;wall&quot;&gt;Wall&lt;/h2&gt;

&lt;p&gt;Enable tty group so user can send messages
&lt;a href=&quot;https://unix.stackexchange.com/a/313558/150895&quot;&gt;https://unix.stackexchange.com/a/313558/150895&lt;/a&gt;&lt;/p&gt;

&lt;h2 id=&quot;python&quot;&gt;Python&lt;/h2&gt;

&lt;p&gt;You can install python using pyenv https://github.com/pyenv/pyenv similar to
rbenv&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;brew install pyenv
pyenv install 2.7.18
# pyenv global 2.7.18
pyenv shell 2.7.18
pyenv versions

# Add to .bashrc
# PATH=$(pyenv root)/shims:$PATH
# eval &quot;$(pyenv init -)&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Wed, 11 Jan 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/01/11/install-ruby-using-brew-rbenv/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/01/11/install-ruby-using-brew-rbenv/</guid>
        
        
      </item>
    
      <item>
        <title>Keyboard Shortcuts And Switch Windows</title>
        <description>&lt;h1 id=&quot;keyboard-remap&quot;&gt;Keyboard remap&lt;/h1&gt;

&lt;h2 id=&quot;xremap&quot;&gt;xremap&lt;/h2&gt;

&lt;p&gt;https://github.com/k0kubun/xremap&lt;/p&gt;

&lt;p&gt;Download from releases https://github.com/k0kubun/xremap/releases and put in
your path.
For specific device use &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;xremap --device &apos;Name&apos;&lt;/code&gt;
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;modmap&lt;/code&gt; allow key-to-key remap
&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;keymap&lt;/code&gt; for remapping a sequence of key combinations with modifiers&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SHIFT-&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;CTRL-&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;ALT-&lt;/code&gt;, &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;SUPER-&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Key codes https://github.com/emberian/evdev/blob/1d020f11b283b0648427a2844b6b980f1a268221/src/scancodes.rs#L26-L572
but you can see them with&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo RUST_LOG=debug ~/config/bin/xremap ~/config/bashrc/xremap.config.yml
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Problem is that I can not remap semicolon to colon ie it still show semicolon&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;keymap:
  - name: Try
    remap:
      KEY_SEMICOLON: SHIFT-KEY_SEMICOLON
      a: SHIFT-b
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;so I switch to keyd.&lt;/p&gt;

&lt;p&gt;Before GNOME 14 we chould get WMCLASS with&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;gdbus call --session \
  --dest org.gnome.Shell \
  --object-path /org/gnome/Shell \
  --method org.gnome.Shell.Eval &quot;global.display.focus_window.get_wm_class()&quot;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;but now we can not use eval.
Another way to get WMCLASS is using Gnome extension
https://extensions.gnome.org/extension/5060/xremap/ and run&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sleep 3 &amp;amp;&amp;amp; busctl --user call org.gnome.Shell /com/k0kubun/Xremap com.k0kubun.Xremap WMClass
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;keyd&quot;&gt;Keyd&lt;/h2&gt;

&lt;p&gt;man page https://github.com/rvaiya/keyd/blob/master/docs/keyd.scdoc&lt;/p&gt;

&lt;p&gt;Install with https://github.com/rvaiya/keyd#from-source&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;git clone https://github.com/rvaiya/keyd
cd keyd
make &amp;amp;&amp;amp; sudo make install
sudo systemctl enable keyd &amp;amp;&amp;amp; sudo systemctl start keyd
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Usefull commands&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# reload configuration
sudo keyd reload

# config errors can be found on
sudo journalctl -eu keyd

# Use `&amp;lt;backspace&amp;gt;+&amp;lt;escape&amp;gt;+&amp;lt;enter&amp;gt;` to stop keyd if you can not use keyboard

# See key codes
sudo keyd monitor
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Main config file must start with &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;[ids]&lt;/code&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# /etc/keyd/default.conf
[ids]
*

[layer-name:modifier]
key alias = key/macro/action
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;modifier is one of:&lt;/p&gt;
&lt;ul&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;C&lt;/code&gt; control&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;M&lt;/code&gt; meta/super&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;A&lt;/code&gt; alt&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;S&lt;/code&gt; shift&lt;/li&gt;
  &lt;li&gt;&lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;G&lt;/code&gt; AltGr&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Example capslock is activating nav layer&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;capslock = layer(nav)

[nav]
h = left
l = right
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can remap whole layer with modifier
[capslock:C]
TODO:&lt;/p&gt;

&lt;p&gt;App specific remaps
https://github.com/rvaiya/keyd#application-specific-remapping-experimental&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo usermod -aG keyd dule

# ~/.config/keyd/app.conf
[chromium]

alt.[ = C-S-tab
alt.] = macro(C-tab)

keyd-application-mapper
Gnome detected
keyd extension not found, installing...
Success! Please restart Gnome and run this script one more time.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;after reboot&lt;/p&gt;
</description>
        <pubDate>Fri, 06 Jan 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/01/06/keyboard-shortcuts-and-switch-windows/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/01/06/keyboard-shortcuts-and-switch-windows/</guid>
        
        
      </item>
    
      <item>
        <title>Ubuntu Multiseat</title>
        <description>&lt;p&gt;You can easilly start with multiseat. Here is a nice blog
&lt;a href=&quot;https://www.apalrd.net/posts/2022/multiseat_intro/&quot;&gt;https://www.apalrd.net/posts/2022/multiseat_intro/&lt;/a&gt;
You can use this script to get all statuses
sudo loginctl seat-status seat3 &amp;gt; ~/config/loginctl/seat3.seat-status.txt&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# ~/config/loginctl_seats/seat_statuses.sh
set -x # Show command being executed              

sudo loginctl seat-status seat0 &amp;gt; ~/config/loginstl_seats/seat0.seat-status.txt
sudo loginctl seat-status seat1 &amp;gt; ~/config/loginstl_seats/seat1.seat-status.txt
sudo loginctl seat-status seat2 &amp;gt; ~/config/loginstl_seats/seat2.seat-status.txt
sudo loginctl seat-status seat3 &amp;gt; ~/config/loginstl_seats/seat3.seat-status.txt                                                                                       
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;Before setting the seats you can read some info about command&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;man loginctl
loginctl list-seats
# when you want to remove all seats and attach to default
loginctl flush-devices
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Let’s store configuration in tmp folder which is tracked with git, for example&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;mkdir ~/config/loginctl_seats
cd ~/config/loginctl_seats
git init .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;steps&quot;&gt;Steps&lt;/h2&gt;

&lt;p&gt;Lets generate info&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./seat_statuses.sh
git add .
git diff --staged
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;here is example seat status&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;lspci | grep VGA
03:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]
04:00.0 VGA compatible controller: Advanced Micro Devices, Inc. [AMD/ATI] Cape Verde PRO [Radeon HD 7750/8740 / R7 250E]

radeontop -b 03
# Graphic pipe 10,00%
# this should remain in seat0 which will be default
radeontop -b 04
# Graphic pipe 0,00%

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You need to attach MASTER devices (ie graphic cards) otherwise new seat will not
be created.
Search for &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;drm&lt;/code&gt; and look at last number (in this case &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;04&lt;/code&gt;)
Also need to attach &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;render&lt;/code&gt; and &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;fb&lt;/code&gt; (frame buffer, if exists) and sound Also
find the ports that you want to assign. If you have usb dock station than you do
have to allocate only one port. All devices attached to docking station will be
under that port (also the soud and microphone). You can use headset with
microphone and with one 3.5mm cable you have stable sound connection.
Put that in &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;attach_seats.sh&lt;/code&gt; file so we can modify and run easilly&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# attach_seats.sh
sudo loginctl attach seat1 /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/0000:02:10.0/0000:04:00.0/drm/card1
sudo loginctl attach seat1 /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/0000:02:10.0/0000:04:00.0/drm/renderD129
sudo loginctl attach seat1 /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/0000:02:10.0/0000:04:00.0/graphics/fb1

sudo loginctl attach seat1 /sys/devices/pci0000:00/0000:00:01.0/0000:01:00.0/0000:02:10.0/0000:04:00.1/sound/card2

# those usb porst are two first rows on the back
sudo loginctl attach seat1 /sys/devices/pci0000:00/0000:00:1d.0/usb2
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;When you run attach you should not see any 04 devices on seat0&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;./attach_seats.sh

# restart
./seat_statuses.sh &amp;amp;&amp;amp; git diff
git add .
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h2 id=&quot;issues&quot;&gt;Issues&lt;/h2&gt;

&lt;p&gt;When someone logs out than all users will log out and only seat0 will get
login screen. Sometimes it helps that seat0 log in and log out. The best is to use Lock instead of Log out.&lt;/p&gt;

&lt;p&gt;When you remove graphic card, than that seat will be discarded and all it’s
devices will be assigned to default seat seat0.&lt;/p&gt;

&lt;p&gt;To remove one specific device from seat, you need to attach to another seat (you
need to know it’s path)&lt;/p&gt;

&lt;h1 id=&quot;usb-dock&quot;&gt;USB Dock&lt;/h1&gt;

&lt;p&gt;Download Display Link software from &lt;a href=&quot;https://www.synaptics.com/products/displaylink-graphics/downloads/ubuntu&quot;&gt;https://www.synaptics.com/products/displaylink-graphics/downloads/ubuntu&lt;/a&gt;
and follow &lt;a href=&quot;https://support.displaylink.com/knowledgebase/articles/1944022-how-to-install-displaylink-software-on-ubuntu-20-0&quot;&gt;https://support.displaylink.com/knowledgebase/articles/1944022-how-to-install-displaylink-software-on-ubuntu-20-0&lt;/a&gt;&lt;/p&gt;

&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo ./displaylink-driver-5.3.0.xx.run
# this will install libdrm-dev lipciaccess-dev

Installing
[ Installing EVDI ]
[[ Installing EVDI DKMS module ]]
Creating symlink /var/lib/dkms/evdi/1.12.0/source -&amp;gt; /usr/src/evdi-1.12.0

Kernel preparation unnecessary for this kernel. Skipping...

Building module:
cleaning build area...
make -j24 KERNELRELEASE=5.19.0-35-generic all INCLUDEDIR=/lib/modules/5.19.0-35-generic/build/include KVERSION=5.19.0-35-generic DKMS_BUILD=1...
Signing module:
 - /var/lib/dkms/evdi/1.12.0/5.19.0-35-generic/x86_64/module/evdi.ko
EFI variables are not supported on this system
/sys/firmware/efi/efivars not found, aborting.
cleaning build area...

evdi.ko:
Running module version sanity check.
 - Original module
   - No original module exists within this kernel
 - Installation
   - Installing to /lib/modules/5.19.0-35-generic/updates/dkms/

depmod....
[[ Installing module configuration files ]]
[[ Installing EVDI library ]]
make: Entering directory &apos;/tmp/tmp.XS3WN4Qt0Q/evdi/library&apos;
cc -I../module -std=gnu99 -fPIC -D_FILE_OFFSET_BITS=64    -c -o evdi_lib.o evdi_lib.c
cc evdi_lib.o -shared -Wl,-soname,libevdi.so.0 -o libevdi.so.1.12.0 -lc -lgcc 
cp libevdi.so.1.12.0 libevdi.so
make: Leaving directory &apos;/tmp/tmp.XS3WN4Qt0Q/evdi/library&apos;
[ Installing x64-ubuntu-1604/DisplayLinkManager ]
[ Installing libraries ]
[ Installing firmware packages ]
[ Installing licence file ]
[ Adding udev rule for DisplayLink DL-3xxx/4xxx/5xxx/6xxx devices ]
[ Adding upstart and powermanager sctripts ]

Please read the FAQ
http://support.displaylink.com/knowledgebase/topics/103927-troubleshooting-ubuntu

Installation complete!

Please reboot your computer if you&apos;re intending to use Xorg.
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;Read FAQ
https://support.displaylink.com/knowledgebase/topics/103927-troubleshooting-ubuntu&lt;/p&gt;

&lt;p&gt;When you move the between seats only difference is that it moves sound:card and
usb (all attached usb devices will show up under this usb device)&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;		  │   │ ├─/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.2/1-1.2.2
		  │   │ │ usb:1-1.2.2
		  │   │ │ ├─/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.2/1-1.2.2/1-1.2.2.1/1-1.2.2.1:1.2/sound/card6
		  │   │ │ │ sound:card6 &quot;Dock&quot;
		  │   │ │ └─/sys/devices/pci0000:00/0000:00:1a.0/usb1/1-1/1-1.2/1-1.2.2/1-1.2.2.4
		  │   │ │   usb:1-1.2.2.4
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;p&gt;other devices stays the same.
And there is no change when we start or stop the driver.&lt;/p&gt;

&lt;p&gt;Driver page is &lt;a href=&quot;https://github.com/DisplayLink/evdi&quot;&gt;https://github.com/DisplayLink/evdi&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;You can stop start the driver with&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;sudo service displaylink-driver stop
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;You can attach specific evdi drm to new seats &lt;a href=&quot;https://askubuntu.com/a/1304701/40031&quot;&gt;https://askubuntu.com/a/1304701/40031&lt;/a&gt;&lt;/p&gt;
&lt;div class=&quot;language-plaintext highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
</description>
        <pubDate>Thu, 05 Jan 2023 00:00:00 +0000</pubDate>
        <link>https://dev.trk.in.rs/2023/01/05/ubuntu-multiseat/</link>
        <guid isPermaLink="true">https://dev.trk.in.rs/2023/01/05/ubuntu-multiseat/</guid>
        
        
      </item>
    
  </channel>
</rss>
